<!DOCTYPE html>
<html lang=”en”>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
</head>
  
<body>

<input type="file" name="file" id="file">
<button onclick = "upload()"> Upload </button>
<button onclick = "copy()"> Copy </button>
<button onclick = "download()"> Download </button> <br><br>
  <input type="number" placeholder="sx" id="sxField">
  <input type="number" placeholder="sy" id="syField">
  <input type="number" placeholder="sw" id="swField">
  <input type="number" placeholder="sh" id="shField"> <br>
  <input type="number" placeholder="dx" id="dxField">
  <input type="number" placeholder="dy" id="dyField">
  <input type="number" placeholder="dw" id="dwField">
  <input type="number" placeholder="dh" id="dhField"> <br><br>

  
<canvas id="canvas1" width="1080" height="2400" style="border:solid black 1px;">
  Your browser does not support canvas element.
</canvas>
<br><br>
<canvas id="canvas2" width="1080" height="640" style="border:solid black 1px;">
</canvas>
  
<script>
alert('1'); 
function upload() {
  
  var sx = document.getElementById("sxField").value; 
  var sy = document.getElementById("syField").value; 
  var sw = document.getElementById("swField").value; 
  var sh = document.getElementById("shField").value; 
 
var canvas1  = document.getElementById("canvas1");
var context1 = canvas1.getContext('2d'); context = context1 ;
var file1 = document.getElementById("file").files[0] ;
  
  var image1 = new Image();
        image1.setAttribute('crossOrigin', 'anonymous');
        image1.src = URL.createObjectURL(file1);
        image1.onload = function (e) {
          context1.drawImage(image1, 0, 0);
        };
     
 }
</script>
 
<script>
  alert('2');
function copy() {
  
  var sx = document.getElementById("sxField").value; 
  var sy = document.getElementById("syField").value; 
  var sw = document.getElementById("swField").value; 
  var sh = document.getElementById("shField").value;
  var dx = document.getElementById("dxField").value; 
  var dy = document.getElementById("dyField").value; 
  var dw = document.getElementById("dwField").value; 
  var dh = document.getElementById("dhField").value;
  
var canvas1  = document.getElementById("canvas1");
var context1 = canvas1.getContext('2d');
var canvas2  = document.getElementById("canvas2");
var context2 = canvas2.getContext('2d');
var file2 = document.getElementById("file").files[0] ;

        var image2 = new Image();
        image2.setAttribute('crossOrigin', 'anonymous');
        image2.src = URL.createObjectURL(file2);
        image2.onload = function (e) {
        context1.drawImage(image2, 0, 0);
        
  
     
     var imgData = context1.getImageData(sx, sy, sw, sh);
     context2.putImageData(imgData, dx, dy);
     
   };
 }
  
</script>
  
<script>
 alert('3');
function download() {
  
    let canvasImage = document.getElementById('canvas2').toDataURL('image/png', 1.0);
    
    // this can be used to download any image from webpage to local disk
    let xhr = new XMLHttpRequest();
    xhr.responseType = 'blob';
    xhr.onload = function () {
        let a = document.createElement('a');
        a.href = window.URL.createObjectURL(xhr.response);
        a.download = 'imag_name.png';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();
        a.remove();
      };
      xhr.open('GET', canvasImage); // This is to download the canvas Image
      xhr.send();
  
  }
  
</script>

    

    


  
  
  
<script>
  
 /*   let canvasImage = document.getElementById('canvas2').toDataURL('image/png');
    
    // this can be used to download any image from webpage to local disk
    let xhr = new XMLHttpRequest();
    xhr.responseType = 'blob';
    xhr.onload = function () {
        let a = document.createElement('a');
        a.href = window.URL.createObjectURL(xhr.response);
        a.download = 'image_name.png';
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();
        a.remove();
      };
      xhr.open('GET', canvasImage); // This is to download the canvas Image
      xhr.send();
   } */
  
</script>
  
<script>
  
  /* var download = function(){
  var link = document.createElement('a');
  link.download = 'filename.png';
  link.href = document.getElementById('canvas').toDataURL()
  link.click();
  };
  
  
  <a id="download" download="triangle.png">
  <button type="button" onClick="download()">Download</button>
  </a>
  
  function download() {
  var download = document.getElementById("download");
  var image = document.getElementById("myCanvas").toDataURL("image/png")
    .replace("image/png", "image/octet-stream");
  download.setAttribute("href", image);
  //download.setAttribute("download","archive.png");
  } */
    
    
</script>
  
<script>
  
</script>
  
</body>
</html>
